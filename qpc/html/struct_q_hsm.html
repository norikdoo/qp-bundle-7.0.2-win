<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: QHsm Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="ql-preview.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="ql-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.png"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">7.0.2</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('struct_q_hsm.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="struct_q_hsm-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">QHsm Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Hierarchical State Machine class.
 <a href="struct_q_hsm.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="qep_8h_source.html">qep.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for QHsm:</div>
<div class="dyncontent">
 <div class="center">
  <img src="struct_q_hsm.png" usemap="#QHsm_map" alt=""/>
  <map id="QHsm_map" name="QHsm_map">
<area href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)" alt="QActive" shape="rect" coords="163,56,262,80"/>
<area href="struct_q_hsm_dummy.html" title="QHsmDummy class." alt="QHsmDummy" shape="rect" coords="272,56,371,80"/>
<area href="struct_q_msm.html" title="QM state machine implementation strategy." alt="QMsm" shape="rect" coords="381,56,480,80"/>
<area href="struct_q_active_dummy.html" title="QActiveDummy Object class." alt="QActiveDummy" shape="rect" coords="0,112,99,136"/>
<area href="struct_q_m_active.html" title="Active object class (based on QMsm implementation strategy)" alt="QMActive" shape="rect" coords="109,112,208,136"/>
<area href="struct_q_ticker.html" title="&quot;Ticker&quot; Active Object class" alt="QTicker" shape="rect" coords="218,112,317,136"/>
<area href="struct_q_x_thread.html" title="eXtended (blocking) thread of the QXK preemptive kernel" alt="QXThread" shape="rect" coords="327,112,426,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a26c0e8cbe4fdcdf423a105924bb5acbe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a26c0e8cbe4fdcdf423a105924bb5acbe">QHsm_isIn</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, <a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> const <a class="el" href="struct_q_hsm.html#a8d413a87f3f4447213fd8a8249844254">state</a>)</td></tr>
<tr class="separator:a26c0e8cbe4fdcdf423a105924bb5acbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514019696f8b329fa10198aa24997f4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a514019696f8b329fa10198aa24997f4a">QHsm_state</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me)</td></tr>
<tr class="separator:a514019696f8b329fa10198aa24997f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03f75d32aa015fb73ed0802813b8fba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#af03f75d32aa015fb73ed0802813b8fba">QHsm_childState</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, <a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> const parent)</td></tr>
<tr class="separator:af03f75d32aa015fb73ed0802813b8fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3e1d1635d8a7f2247272bb425d8839b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a3e1d1635d8a7f2247272bb425d8839b8">QHsm_ctor</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, <a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> initial)</td></tr>
<tr class="separator:a3e1d1635d8a7f2247272bb425d8839b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a291b48e585af5e2c2baa3113746c98e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qep_8h.html#a8b8c3bfa37b563453d1d50e09538b896">QState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a291b48e585af5e2c2baa3113746c98e0">QHsm_top</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> const *const me, <a class="el" href="struct_q_evt.html">QEvt</a> const *const e)</td></tr>
<tr class="separator:a291b48e585af5e2c2baa3113746c98e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ea9beec815f45de50af29febf01de6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#ab8ea9beec815f45de50af29febf01de6">QHsm_init_</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, void const *const e, uint_fast8_t const qs_id)</td></tr>
<tr class="separator:ab8ea9beec815f45de50af29febf01de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d87c75ad12987b16ed1ffdcde8f85b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#ae8d87c75ad12987b16ed1ffdcde8f85b">QHsm_dispatch_</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, <a class="el" href="struct_q_evt.html">QEvt</a> const *const e, uint_fast8_t const qs_id)</td></tr>
<tr class="separator:ae8d87c75ad12987b16ed1ffdcde8f85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad11a75af46c8d76f513a3989edfad880"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#ad11a75af46c8d76f513a3989edfad880">QHsm_getStateHandler_</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me)</td></tr>
<tr class="separator:ad11a75af46c8d76f513a3989edfad880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac264bed46d2f0d5b346a7c2ae572583b"><td class="memItemLeft" align="right" valign="top">int_fast8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#ac264bed46d2f0d5b346a7c2ae572583b">QHsm_tran_</a> (<a class="el" href="struct_q_hsm.html">QHsm</a> *const me, <a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> path[<a class="el" href="qep_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9444526607bbe042d10a984baf7021b8">QHSM_MAX_NEST_DEPTH_</a>], uint_fast8_t const qs_id)</td></tr>
<tr class="separator:ac264bed46d2f0d5b346a7c2ae572583b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2af6d01da4b759aabcf54c9e099484a2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_q_hsm_vtable.html">QHsmVtable</a> const  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a2af6d01da4b759aabcf54c9e099484a2">vptr</a></td></tr>
<tr class="separator:a2af6d01da4b759aabcf54c9e099484a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d413a87f3f4447213fd8a8249844254"><td class="memItemLeft" align="right" valign="top">union <a class="el" href="union_q_hsm_attr.html">QHsmAttr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#a8d413a87f3f4447213fd8a8249844254">state</a></td></tr>
<tr class="separator:a8d413a87f3f4447213fd8a8249844254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafa3d55ac553aa43aaf5761ce7010130"><td class="memItemLeft" align="right" valign="top">union <a class="el" href="union_q_hsm_attr.html">QHsmAttr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_q_hsm.html#aafa3d55ac553aa43aaf5761ce7010130">temp</a></td></tr>
<tr class="separator:aafa3d55ac553aa43aaf5761ce7010130"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p ><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> represents a Hierarchical State Machine (HSM) with full support for hierarchical nesting of states, entry/exit actions, initial transitions, and transitions to history in any composite state. This class is designed for ease of manual coding of HSMs in C, but it is also supported by the QM modeling tool.<br  />
</p>
<p ><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> is also the base class for the <a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a> state machine, which provides a superior efficiency, but requires the use of the QM modeling tool to generate code.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> is not intended to be instantiated directly, but rather serves as the abstract base class for derivation of state machines in the QP application.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000006">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="enddd">traces to: AQP211</p>
</dd></dl>
<dl class="section user"><dt>Usage</dt><dd>The following example illustrates how to derive a state machine class from <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a>. Please note that the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> member <code>super</code> is defined as the FIRST member of the derived class. <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <a class="code hl_class" href="struct_q_hsm.html">QHsm</a> super;  <span class="comment">/* inhertits QHsm */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> operand1;</div>
<div class="line">    <span class="keywordtype">double</span> operand2;</div>
<div class="line">    <span class="keywordtype">char</span> display[DISP_WIDTH + 1];</div>
<div class="line">    uint8_t len;</div>
<div class="line">    uint8_t opKey;</div>
<div class="line">} Calc;</div>
<div class="ttc" id="astruct_q_hsm_html"><div class="ttname"><a href="struct_q_hsm.html">QHsm</a></div><div class="ttdoc">Hierarchical State Machine class.</div><div class="ttdef"><b>Definition:</b> <a href="qep_8h_source.html#l00359">qep.h:359</a></div></div>
</div><!-- fragment --> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qep_8h_source.html#l00359">359</a> of file <a class="el" href="qep_8h_source.html">qep.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a26c0e8cbe4fdcdf423a105924bb5acbe" name="a26c0e8cbe4fdcdf423a105924bb5acbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26c0e8cbe4fdcdf423a105924bb5acbe">&#9670;&nbsp;</a></span>QHsm_isIn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QHsm_isIn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> const&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Tests if a given state is part of the current active state configuration in <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> subclasses.</p>
<p >Tests if a state machine derived from <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> is-in a given state.</p>
<dl class="section note"><dt>Note</dt><dd>For a HSM, to "be in a state" means also to be in a superstate of of the state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>pointer to the state-handler function to be tested</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'true' if the HSM "is in" the <code>state</code> and 'false' otherwise</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000007">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="enddd">traces to: RQP120S </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00132">132</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="a514019696f8b329fa10198aa24997f4a" name="a514019696f8b329fa10198aa24997f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a514019696f8b329fa10198aa24997f4a">&#9670;&nbsp;</a></span>QHsm_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> QHsm_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Obtain the current active state from a HSM (read only).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the current active state of the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> class</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is used in QM for auto-generating code for state history. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00158">158</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="af03f75d32aa015fb73ed0802813b8fba" name="af03f75d32aa015fb73ed0802813b8fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03f75d32aa015fb73ed0802813b8fba">&#9670;&nbsp;</a></span>QHsm_childState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> QHsm_childState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> const&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Obtain the current active child state of a given parent in <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a></p>
<p >Finds the child state of the given <code>parent</code>, such that this child state is an ancestor of the currently active state. The main purpose of this function is to support <b>shallow history</b> transitions in state machines derived from <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>pointer to the state-handler function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the child of a given <code>parent</code> state, which is an ancestor of the current active state. For the corner case when the currently active state is the given <code>parent</code> state, function returns the <code>parent</code> state.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>this function is designed to be called during state transitions, so it does not necessarily start in a stable state configuration. However, the function establishes stable state configuration upon exit.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000008">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="enddd">traces to: RQP120H </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00163">163</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="a3e1d1635d8a7f2247272bb425d8839b8" name="a3e1d1635d8a7f2247272bb425d8839b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1d1635d8a7f2247272bb425d8839b8">&#9670;&nbsp;</a></span>QHsm_ctor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QHsm_ctor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>&#160;</td>
          <td class="paramname"><em>initial</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Protected "constructor" of <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a></p>
<p >Performs the first step of HSM initialization by assigning the initial pseudostate to the currently active state of the state machine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">initial</td><td>pointer to the top-most initial state-handler function in the derived state machine</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Must be called only by the constructors of the derived state machines.</dd>
<dd>
Must be called only ONCE before <a class="el" href="qep_8h.html#a00d0f110eb822b8c6614e67acc91d9da">QHSM_INIT()</a>.</dd></dl>
<dl class="section user"><dt>Usage</dt><dd>The following example illustrates how to invoke <a class="el" href="struct_q_hsm.html#a3e1d1635d8a7f2247272bb425d8839b8">QHsm_ctor()</a> in the "constructor" of a derived state machine: <div class="fragment"><div class="line"><span class="keywordtype">void</span> Calc_ctor(Calc * <span class="keyword">const</span> me) {</div>
<div class="line">    <span class="comment">/* superclass&#39; ctor */</span></div>
<div class="line">    <a class="code hl_function" href="struct_q_hsm.html#a3e1d1635d8a7f2247272bb425d8839b8">QHsm_ctor</a>(&amp;me-&gt;super, <a class="code hl_define" href="qep_8h.html#a6531b0ab582f41275f19d28ac91d9e4f">Q_STATE_CAST</a>(&amp;Calc_initial));</div>
<div class="line"> </div>
<div class="line">    me-&gt;operand1 = 0.0;</div>
<div class="line">    me-&gt;operand2 = 0.0;</div>
<div class="line">    me-&gt;len      = 0U;</div>
<div class="line">    me-&gt;opKey    = 0U;</div>
<div class="line">}</div>
<div class="ttc" id="aqep_8h_html_a6531b0ab582f41275f19d28ac91d9e4f"><div class="ttname"><a href="qep_8h.html#a6531b0ab582f41275f19d28ac91d9e4f">Q_STATE_CAST</a></div><div class="ttdeci">#define Q_STATE_CAST(handler_)</div><div class="ttdef"><b>Definition:</b> <a href="qep_8h_source.html#l00984">qep.h:984</a></div></div>
<div class="ttc" id="astruct_q_hsm_html_a3e1d1635d8a7f2247272bb425d8839b8"><div class="ttname"><a href="struct_q_hsm.html#a3e1d1635d8a7f2247272bb425d8839b8">QHsm::QHsm_ctor</a></div><div class="ttdeci">void QHsm_ctor(QHsm *const me, QStateHandler initial)</div><div class="ttdef"><b>Definition:</b> <a href="qep__hsm_8c_source.html#l00196">qep_hsm.c:196</a></div></div>
</div><!-- fragment --></dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000009">Traceability:</a></b></dt><dd>traces to: RQP103 </dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00196">196</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="a291b48e585af5e2c2baa3113746c98e0" name="a291b48e585af5e2c2baa3113746c98e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a291b48e585af5e2c2baa3113746c98e0">&#9670;&nbsp;</a></span>QHsm_top()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qep_8h.html#a8b8c3bfa37b563453d1d50e09538b896">QState</a> QHsm_top </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> const *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_q_evt.html">QEvt</a> const *const&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >The top-state of <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a>.</p>
<p ><a class="el" href="struct_q_hsm.html#a291b48e585af5e2c2baa3113746c98e0">QHsm_top()</a> is the ultimate root of state hierarchy in all HSMs derived from <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>pointer to the event to be dispatched to the FSM</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns <a class="el" href="qep_8h.html#a4fb8516e64304771bf6423b85a7a3902">Q_RET_IGNORED</a>, which means that the top state ignores all events.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The parameters to this state handler are not used. They are provided for conformance with the state-handler function signature <a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000010">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="enddd">traces to: RQP120T </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00212">212</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="ab8ea9beec815f45de50af29febf01de6" name="ab8ea9beec815f45de50af29febf01de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8ea9beec815f45de50af29febf01de6">&#9670;&nbsp;</a></span>QHsm_init_()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QHsm_init_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *const&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint_fast8_t const&#160;</td>
          <td class="paramname"><em>qs_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Implementation of the top-most initial tran. in <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a>.</p>
<p >Executes the top-most initial transition in a HSM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>pointer to an extra parameter (might be NULL) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qs_id</td><td>QS-id of this state machine (for QS local filter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Must be called only ONCE after the <a class="el" href="struct_q_hsm.html#a3e1d1635d8a7f2247272bb425d8839b8">QHsm_ctor()</a>.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000011">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="interdd">traces to: RQP120I </p>
<p class="enddd">traces to: RQP120D </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00221">221</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="ae8d87c75ad12987b16ed1ffdcde8f85b" name="ae8d87c75ad12987b16ed1ffdcde8f85b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d87c75ad12987b16ed1ffdcde8f85b">&#9670;&nbsp;</a></span>QHsm_dispatch_()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QHsm_dispatch_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_q_evt.html">QEvt</a> const *const&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint_fast8_t const&#160;</td>
          <td class="paramname"><em>qs_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Implementation of dispatching events to a <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a></p>
<p >Dispatches an event for processing to a hierarchical state machine (HSM). The processing of an event represents one run-to-completion (RTC) step.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">oop</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>pointer to the event to be dispatched to the HSM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qs_id</td><td>QS-id of this state machine (for QS local filter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function should be called only via the virtual table (see <a class="el" href="qep_8h.html#a3e8f95402a96dbc25908eab72bc63035">QHSM_DISPATCH()</a>) and should NOT be called directly in the applications.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000012">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="interdd">traces to: RQP120A </p>
<p class="interdd">traces to: RQP120B </p>
<p class="interdd">traces to: RQP120C </p>
<p class="interdd">traces to: RQP120D </p>
<p class="enddd">traces to: RQP120E </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00300">300</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="ad11a75af46c8d76f513a3989edfad880" name="ad11a75af46c8d76f513a3989edfad880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad11a75af46c8d76f513a3989edfad880">&#9670;&nbsp;</a></span>QHsm_getStateHandler_()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> QHsm_getStateHandler_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Implementation of getting the state handler in a <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> subclass </p>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00459">459</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<a id="ac264bed46d2f0d5b346a7c2ae572583b" name="ac264bed46d2f0d5b346a7c2ae572583b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac264bed46d2f0d5b346a7c2ae572583b">&#9670;&nbsp;</a></span>QHsm_tran_()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int_fast8_t QHsm_tran_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_hsm.html">QHsm</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qep_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a>&#160;</td>
          <td class="paramname"><em>path</em>[QHSM_MAX_NEST_DEPTH_], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint_fast8_t const&#160;</td>
          <td class="paramname"><em>qs_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Helper function to execute transition sequence in a hierarchical state machine (HSM).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">path</td><td>array of pointers to state-handler functions to execute the entry actions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qs_id</td><td>QS-id of this state machine (for QS local filter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the depth of the entry path stored in the <code>path</code> parameter.</dd></dl>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000013">Traceability:</a></b></dt><dd><p class="startdd">traces to: RQP103 </p>
<p class="interdd">traces to: RQP120E </p>
<p class="enddd">traces to: RQP120F </p>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="qep__hsm_8c_source.html#l00465">465</a> of file <a class="el" href="qep__hsm_8c_source.html">qep_hsm.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2af6d01da4b759aabcf54c9e099484a2" name="a2af6d01da4b759aabcf54c9e099484a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af6d01da4b759aabcf54c9e099484a2">&#9670;&nbsp;</a></span>vptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_q_hsm_vtable.html">QHsmVtable</a> const* vptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Virtual pointer</p>
<dl class="tr"><dt><b><a class="el" href="tr.html#_tr000027">Traceability:</a></b></dt><dd>traces to: RQP102 </dd></dl>

<p class="definition">Definition at line <a class="el" href="qep_8h_source.html#l00367">367</a> of file <a class="el" href="qep_8h_source.html">qep.h</a>.</p>

</div>
</div>
<a id="a8d413a87f3f4447213fd8a8249844254" name="a8d413a87f3f4447213fd8a8249844254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d413a87f3f4447213fd8a8249844254">&#9670;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="union_q_hsm_attr.html">QHsmAttr</a> state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Current active state (state-variable). </p>

<p class="definition">Definition at line <a class="el" href="qep_8h_source.html#l00374">374</a> of file <a class="el" href="qep_8h_source.html">qep.h</a>.</p>

</div>
</div>
<a id="aafa3d55ac553aa43aaf5761ce7010130" name="aafa3d55ac553aa43aaf5761ce7010130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafa3d55ac553aa43aaf5761ce7010130">&#9670;&nbsp;</a></span>temp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="union_q_hsm_attr.html">QHsmAttr</a> temp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Temporary: target/act-table, etc. </p>

<p class="definition">Definition at line <a class="el" href="qep_8h_source.html#l00379">379</a> of file <a class="el" href="qep_8h_source.html">qep.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="qep_8h_source.html">qep.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="struct_q_hsm.html">QHsm</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2022 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.0.2</b> &nbsp;|&nbsp; Updated on Sat Aug 13 2022
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2022 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.0.2</b> &nbsp;|&nbsp; Updated on Sat Aug 13 2022
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
